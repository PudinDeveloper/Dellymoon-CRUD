<p id="notice"><%= notice %></p>

<div class="mx-5">
  <%= link_to 'Back', root_path, class: "btn btn-lg btn-dark my-3" %>
  <%= link_to 'New ticket', new_ticket_path, class: "btn btn-lg btn-success" %>
  <a href="#" class="btn btn-lg btn-primary" onclick="window.location.reload();">Reload ðŸ”„</a>
</div>

<div class="m-5">

<h2 class="my-5">Active Tickets</h2>

  <div class="container">
    <table class="table table-hover">
      <thead>
        <th scope="col">Ticket ID</th>
        <th scope="col">Table</th>
        <th scope="col">Final Price</th>
        <th scope="col">Datetime</th>
        <th colspan="5">Actions</th>
      <tbody>
          <% @ticketsActive.each do |ticket| %>
          <tr>
            <td><%= ticket.id %></td>
            <td><%= ticket.table %></td>
            <td>$<%= ticket.final_price ? ticket.final_price : 0.0 %></td>
            <td><%= ticket.updated_at.localtime %></td>
            <td><%= link_to 'Open', ticket, class: "btn btn-success btn-lg" %></td>
            <td>
              <%= form_with(model: ticket, method: :delete, data: { confirm: 'Are you sure?' }) do |form| %>
                <%= form.submit 'Complete', class: 'btn btn-warning btn-lg' %>
              <% end %>
            </td>
          </tr>
          <% end %>
      </tbody>
    </table>
  </div>

  <h2 class="my-5">Past Tickets</h2>
  <div class="container">
    <table class="table table-hover">
      <thead>
        <th scope="col">Ticket ID</th>
        <th scope="col">Table</th>
        <th scope="col">Final Price</th>
        <th scope="col">Datetime</th>
        <th colspan="5">Actions</th>
      <tbody>
          <% @ticketsInactive.each do |ticket| %>
          <tr>
            <td><%= ticket.id %></td>
            <td><%= ticket.table %></td>
            <td>$<%= ticket.final_price ? ticket.final_price : 0.0 %></td>
            <td><%= ticket.updated_at.localtime %></td>
            <td><%= link_to 'View', ticket, class: "btn btn-success btn-lg" %></td>
          </tr>
          <% end %>
      </tbody>
    </table>
  </div>

  <br>
</div>
